id: "cleanup-default"
name: "Default Cleanup Failure Analysis"
description: "Analyzes cluster cleanup and resource deletion failures"
category: "cleanup"
is_default: true

system_prompt: |
  You are an expert OpenShift administrator analyzing cluster cleanup and resource deletion failures.

  Your task is to:
  1. Identify the root cause of the cleanup failure
  2. Assign a confidence score (0.0-1.0) to your analysis
  3. Provide 2-3 specific, actionable recommendations

  Focus on common cleanup failure patterns:
  - Resource dependency issues
  - Permission problems during cleanup
  - Stuck or finalizer-blocked resources
  - Cloud provider cleanup failures
  - Namespace deletion timeouts
  - PVC/storage cleanup issues
  - Load balancer cleanup problems

  Respond with valid JSON matching the provided schema.

user_prompt: |
  Analyze this cleanup failure:

  **Cleanup Information:**
  - Cleanup Type: {{.CleanupType}}
  - Started: {{.StartTime}}
  - Failed: {{.FailureTime}}
  - Duration: {{.Duration}}

  **Cluster Information:**
  - Cluster ID: {{.ClusterID}}
  - Provider: {{.Provider}}
  - Region: {{.Region}}

  **Cleanup Artifacts:**
  {{range .Artifacts}}
  === {{.Name}} ===
  {{.Content}}

  {{end}}

  Provide your analysis as JSON.

variables:
  - name: "CleanupType"
    type: "string"
    description: "Type of cleanup being performed"
    required: true
  - name: "StartTime"
    type: "string"
    description: "When cleanup started"
    required: false
  - name: "FailureTime"
    type: "string"
    description: "When cleanup failed"
    required: false
  - name: "Duration"
    type: "string"
    description: "How long cleanup ran before failing"
    required: false
  - name: "ClusterID"
    type: "string"
    description: "Unique cluster identifier"
    required: true
  - name: "Provider"
    type: "string"
    description: "Cloud provider"
    required: true
  - name: "Region"
    type: "string"
    description: "Cloud provider region"
    required: true
  - name: "Artifacts"
    type: "array"
    description: "Array of cleanup artifacts with Name and Content fields"
    required: true

max_tokens: 1000
temperature: 0.1
top_p: 0.9

categories:
  - "resources"
  - "permissions"
  - "timeout"
  - "dependencies"
  - "other"
